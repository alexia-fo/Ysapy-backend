"use strict";(self.webpackChunkysapy_web=self.webpackChunkysapy_web||[]).push([[565],{1565:(j,l,r)=>{r.r(l),r.d(l,{AutentificacionModule:()=>q});var u=r(6895),c=r(2367),a=r(4006),e=r(8256),d=r(2550),m=r(6386);function f(o,i){if(1&o&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.mensajeError("correo"))}}function p(o,i){if(1&o&&(e.TgZ(0,"small",30),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.mensajeError("contra"))}}function g(o,i){1&o&&(e.TgZ(0,"div",31)(1,"div",32)(2,"span",33),e._uU(3,"Loading..."),e.qZA()()())}function h(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.login())}),e._uU(1,"Ingresar"),e.qZA()}}let v=(()=>{class o{constructor(t,n,s,_){this.formBuilder=t,this.router=n,this.authService=s,this.mensajeAlertify=_,this.mensaje="",this.cargando=!1}ngOnInit(){this.form=this.formBuilder.group({correo:["",[a.kI.required]],contra:["",[a.kI.required]]})}login(){this.cargando=!0,this.form.valid?this.authService.ingresarRetornarPerfil(this.form.get("correo")?.value,this.form.get("contra")?.value).subscribe({next:t=>{this.cargando=!1,this.mensaje="ROOT"==this.authService.usuario.Rol.rol?"Root":"ADMINISTRACION"==this.authService.usuario.Rol.rol?"Administrador":"FUNCIONARIO"==this.authService.usuario.Rol.rol?"Funcionario":"CLIENTE"==this.authService.usuario.Rol.rol?"Cliente":"Rol no definido",this.mensajeAlertify.mensajeExito(`Has ingresado como ${this.mensaje}`),this.router.navigate(["/autentificacion/perfil"])},error:t=>{this.cargando=!1,t.forEach(n=>{this.mensajeAlertify.mensajeError(n)})}}):this.form.markAllAsTouched()}isInvalid(t){let n=(this.form.get(t)?.touched||this.form.get(t)?.dirty)&&this.form.get(t)?.invalid,s=document.getElementById(t);return n?s?.classList.add("is-invalid"):s?.classList.remove("is-invalid"),n}mensajeError(t){let n="";return this.form.get(t)?.hasError("required")&&("correo"==t?n="El correo es requerido !!":"contra"==t&&(n="La contrase\xf1a es requerida !!")),n}invalidarCampos(){document.getElementById("correo").className+=" is-invalid",document.getElementById("contra").className+=" is-invalid"}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(c.F0),e.Y36(d.Q),e.Y36(m.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:43,vars:5,consts:[["id","fondo"],[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],["id","tarjeta",1,"bg-white","px-4","pb-5","rounded-5","text-secondary","shadow"],[1,"d-flex","justify-content-center"],["id","iconoLogin",1,"bi","bi-person-fill-lock"],[1,"text-center","fs-1","fw-bold","text-dark-emphasis"],[3,"formGroup"],[1,"input-group","has-validation"],[1,"input-group-text","e-iconoLabel"],[1,"bi","bi-person-fill"],[1,"form-floating","is-invalid"],["type","email","id","correo","placeholder"," ","formControlName","correo",1,"form-control"],["for","correo"],[1,"invalid-feedback"],["class","e-mensaje-error",4,"ngIf"],[1,"input-group","has-validation","mt-1"],[1,"bi","bi-key-fill"],["type","text","id","contra","placeholder"," ","formControlName","contra",1,"form-control"],["for","contra"],["id","alerta",1,"mt-2"],["class","text-center",4,"ngIf"],["type","button","class","btn text-white w-100 mt-2 fw-semibold shadow-sm btn-secondary",3,"click",4,"ngIf"],[1,"d-flex","gap-1","justify-content-center","mt-1"],["routerLink","/",1,"text-decoration-none","fw-semibold","text-dark-emphasis"],[1,"p-3"],[1,"border-bottom","text-center",2,"height","0.9rem"],[1,"bg-white","px-3"],[1,"btn","d-flex","gap-2","justify-content-center","border","mt-3","shadow-sm"],["id","iconoGoogle",1,"bi","bi-google","text-secondary"],[1,"fw-semibold","text-secondary"],[1,"e-mensaje-error"],[1,"text-center"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["type","button",1,"btn","text-white","w-100","mt-2","fw-semibold","shadow-sm","btn-secondary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"h1",5),e._uU(6,"Login"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"form",6)(9,"div",7)(10,"span",8),e._UZ(11,"i",9),e.qZA(),e.TgZ(12,"div",10),e._UZ(13,"input",11),e.TgZ(14,"label",12),e._uU(15,"Correo"),e.qZA()(),e._UZ(16,"div",13),e.qZA(),e.YNc(17,f,2,1,"small",14),e.TgZ(18,"div",15)(19,"span",8),e._UZ(20,"i",16),e.qZA(),e.TgZ(21,"div",10),e._UZ(22,"input",17),e.TgZ(23,"label",18),e._uU(24,"Contrase\xf1a"),e.qZA()(),e._UZ(25,"div",13),e.qZA(),e.YNc(26,p,2,1,"small",14),e._UZ(27,"div",19),e.YNc(28,g,4,0,"div",20),e.YNc(29,h,2,0,"button",21),e.TgZ(30,"div",22)(31,"div"),e._uU(32,"No tienes una cuenta ?"),e.qZA(),e.TgZ(33,"a",23),e._uU(34,"Registrarse"),e.qZA()(),e.TgZ(35,"div",24)(36,"div",25)(37,"span",26),e._uU(38,"\xf3"),e.qZA()()(),e.TgZ(39,"div",27),e._UZ(40,"i",28),e.TgZ(41,"div",29),e._uU(42,"Contin\xfaa con Google"),e.qZA()()()()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",n.form),e.xp6(9),e.Q6J("ngIf",n.isInvalid("correo")),e.xp6(9),e.Q6J("ngIf",n.isInvalid("contra")),e.xp6(2),e.Q6J("ngIf",n.cargando),e.xp6(1),e.Q6J("ngIf",!n.cargando))},dependencies:[u.O5,c.rH,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:["#tarjeta[_ngcontent-%COMP%]{width:25rem}#iconoLogin[_ngcontent-%COMP%]{font-size:7rem;color:var(--segundo-color)}.e-texto-marron[_ngcontent-%COMP%]{color:var(--tercer-color)}.e-iconoLabel[_ngcontent-%COMP%]{background-color:var(--segundo-color);color:#fff;border-color:var(--segundo-color)}#btnIngresar[_ngcontent-%COMP%]{background-color:var(--tercer-color)}#iconoGoogle[_ngcontent-%COMP%]{height:1.6rem}"]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-main"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},dependencies:[c.lC]}),o})();var A=r(9019),U=r(1334);const y=[{path:"",component:Z,children:[{path:"login",component:v},{path:"perfil",component:(()=>{class o{constructor(t){this.servicioA=t,this.apiUrl=`${A.N.API_URL}/api/uploads/usuarios/`}ngOnInit(){this.usuario=this.servicioA.usuario}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.Q))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-perfil"]],decls:32,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],[1,"card","my-3","w-100"],[1,"row","g-2"],[1,"col-md-6","text-center"],["alt","...",1,"img-fluid","rounded-start","w-100",3,"src"],[1,"col-md-6"],[1,"card-body"]],template:function(t,n){1&t&&(e._UZ(0,"app-menu-funcionario"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"img",6),e.qZA(),e.TgZ(8,"div",7)(9,"div",8)(10,"h2"),e._uU(11,"Perfil de usuario"),e.qZA(),e.TgZ(12,"h3"),e._uU(13,"Nombre: "),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA(),e.TgZ(16,"h3"),e._uU(17,"Usuario: "),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA(),e.TgZ(20,"h3"),e._uU(21,"Correo: "),e.qZA(),e.TgZ(22,"p"),e._uU(23),e.qZA(),e.TgZ(24,"h3"),e._uU(25,"Rol: "),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA(),e.TgZ(28,"h3"),e._uU(29,"Sucursal: "),e.qZA(),e.TgZ(30,"p"),e._uU(31),e.qZA()()()()()()()()),2&t&&(e.xp6(7),e.Q6J("src",n.apiUrl+n.usuario.idUsuario,e.LSH),e.xp6(8),e.Oqu(n.usuario.nombre),e.xp6(4),e.Oqu(n.usuario.nusuario),e.xp6(4),e.Oqu(n.usuario.correo),e.xp6(4),e.Oqu(n.usuario.Rol.rol),e.xp6(4),e.Oqu(n.usuario.Sucursal.nombre))},dependencies:[U.e]}),o})(),canActivate:[r(6866).z]},{path:"**",redirectTo:"login"}]}];let C=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.Bz.forChild(y),c.Bz]}),o})();var x=r(9531);let q=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,C,a.UX,x.H]}),o})()}}]);