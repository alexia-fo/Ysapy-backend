"use strict";(self.webpackChunkysapy_web=self.webpackChunkysapy_web||[]).push([[191],{8191:(ge,C,u)=>{u.r(C),u.d(C,{FuncionarioModule:()=>he});var d=u(6895),b=u(2367),t=u(8256),P=u(1334);let S=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-main"]],decls:2,vars:0,template:function(e,i){1&e&&t._UZ(0,"app-menu-funcionario")(1,"router-outlet")},dependencies:[b.lC,P.e]}),o})();var n=u(4006),m=u(6386),Z=u(9019),l=u(262),h=u(3900),f=u(4004),g=u(9646),x=u(529),A=u(4099);let v=(()=>{class o{constructor(e,i){this.http=e,this.errorS=i,this.apiUrl=`${Z.N.API_URL}/api`}
//! --- Cabecera de Inventario ---
verExiteApertura(){return this.http.get(`${this.apiUrl}/inventarios/verExisteApertura`).pipe((0,l.K)(this.errorS.handleError))}sucDeUsuario(){return this.http.get(`${this.apiUrl}/inventarios/sucDeUsuario`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatosCabecera(){return this.verExiteApertura().pipe((0,h.w)(e=>e.habilitado?this.sucDeUsuario().pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,sucursal:i.sucursal}))):(0,g.of)({mostrar:!1,descripcion:e.descripcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))}crearApertura(e){return this.http.post(`${this.apiUrl}/inventarios/crearApertura`,{...e}).pipe((0,l.K)(this.errorS.handleError))}
//! --- Invetario de productos ---
verificarInventario(){return this.http.get(`${this.apiUrl}/inventarios/verificarInventario`).pipe((0,l.K)(this.errorS.handleError))}productosInventario(){return this.http.get(`${this.apiUrl}/inventarios/productosInventario`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatosProducto(){return this.verificarInventario().pipe((0,h.w)(e=>e.habilitado?this.productosInventario().pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,productos:i.producto,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura}))):(0,g.of)({mostrar:!1,descripcion:e.descripcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))}registrarInventario(e){return this.http.post(`${this.apiUrl}/inventarios/registrarInventario`,{...e}).pipe((0,l.K)(this.errorS.handleError))}
//! --- Rendicion caja ---
verificarRendicion(){return this.http.get(`${this.apiUrl}/inventarios/verificarRendicion`).pipe((0,l.K)(this.errorS.handleError))}dinerosRendicion(){return this.http.get(`${this.apiUrl}/inventarios/dinerosRendicion`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatosDinero(){return this.verificarRendicion().pipe((0,h.w)(e=>e.habilitado?this.dinerosRendicion().pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,dineros:i.dinero,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura}))):(0,g.of)({mostrar:!1,descripcion:e.descripcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))}registrarRendicion(e){return this.http.post(`${this.apiUrl}/inventarios/registrarRendicion`,{...e}).pipe((0,l.K)(this.errorS.handleError))}obtenerProductoPorId(e){return this.http.get(`${this.apiUrl}/inventarios/producto/${e}`).pipe((0,l.K)(this.errorS.handleError))}visualizarInventarios(){return this.http.get(`${this.apiUrl}/inventarios/visualizarInventario`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatosVisualizar(){return this.verExiteApertura().pipe((0,h.w)(e=>e.habilitado?(0,g.of)({mostrar:!1,descripcion:e.descripcion}):this.visualizarInventarios().pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,dinventario:i.dInventario,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.eN),t.LFG(A.g))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _=u(5415);function R(o,a){if(1&o&&(t.TgZ(0,"h6",10),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.fechaApertura),"")}}function N(o,a){if(1&o&&(t.TgZ(0,"h6",10),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.idCabeceraInv,"")}}function O(o,a){if(1&o&&(t.TgZ(0,"h6",10),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("TOTAL COBRADO: ",t.lcZ(2,1,e.calcularTotalCaja()),"")}}function j(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.enviar())}),t._uU(3,"Enviar"),t.qZA()()()}}function E(o,a){1&o&&(t.TgZ(0,"div",14)(1,"div",15)(2,"span",16),t._uU(3,"Loading..."),t.qZA()()())}function w(o,a){1&o&&(t.TgZ(0,"div",2)(1,"div",14)(2,"div",17)(3,"span",16),t._uU(4,"Loading..."),t.qZA()()()())}function J(o,a){if(1&o&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&o){const e=t.oxw().index,i=t.oxw(2);t.xp6(1),t.hij(" ",i.mensajeValidacion("cantidad",i.form.get("dineroControles").get(e.toString()))," ")}}function D(o,a){if(1&o&&(t.TgZ(0,"span",30),t._uU(1),t.qZA()),2&o){const e=t.oxw().index,i=t.oxw(2);t.xp6(1),t.hij(" ",i.mensajeValidacion("observacion",i.form.get("dineroControles").get(e.toString()))," ")}}function Y(o,a){if(1&o&&(t.TgZ(0,"tr",23)(1,"td",24),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td",25),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td",26)(8,"div"),t._UZ(9,"input",27),t.YNc(10,J,2,1,"span",28),t.qZA()(),t.TgZ(11,"td",26)(12,"div"),t._UZ(13,"input",29),t.YNc(14,D,2,1,"span",28),t.qZA()()()),2&o){const e=a.$implicit,i=a.index,r=t.oxw(2);t.Q6J("formGroupName",i),t.xp6(2),t.Oqu(t.lcZ(3,6,e.nombreBillete)),t.xp6(3),t.Oqu(t.lcZ(6,8,e.monto)),t.xp6(4),t.Q6J("id","dineroControles-"+i+"-cantidad"),t.xp6(1),t.Q6J("ngIf",r.datoInvalido("cantidad","dineroControles",i)),t.xp6(4),t.Q6J("ngIf",r.datoInvalido("observacion","dineroControles",i))}}function Q(o,a){if(1&o&&(t.TgZ(0,"form",18)(1,"div",19)(2,"table",20)(3,"thead",21)(4,"tr")(5,"th",14),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"th",14),t._uU(8,"Monto"),t.qZA(),t.TgZ(9,"th",14),t._uU(10,"Cantidad"),t.qZA(),t.TgZ(11,"th",14),t._uU(12,"Observacion"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Y,15,10,"tr",22),t.qZA()()()()),2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("dtOptions",e.dtOptions),t.xp6(12),t.Q6J("ngForOf",e.dineros)}}const L=function(o,a){return{"text-danger":o,"text-secondary":a}};let k=(()=>{class o{constructor(e,i,r){this.mensajeAlertify=e,this.servicioR=i,this.fb=r,this.dineros=[],this.cargandoTabla=!1,this.invHabilitado=!1,this.descripcion="",this.dtOptions={paging:!1,info:!1,responsive:!0,searching:!1,ordering:!1,language:{search:"Buscar:",zeroRecords:"No se encontraron resultados",info:"Mostrando _START_ a _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",infoFiltered:"(filtrados de _MAX_ registros en total)",lengthMenu:"Mostrar _MENU_ registros",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"}}},this.form=this.fb.group({dineroControles:this.fb.array([])})}ngOnInit(){this.consultarDetalle()}mensajeValidacion(e,i){let r="";return i.get(e)?.invalid&&(i.get(e)?.touched||i.get(e)?.dirty)&&(i.get(e)?.errors?.required&&(r="Es requerido"),i.get(e)?.errors?.min&&(r="M\xednimo 0")),r}datoInvalido(e,i,r){const s=this.form.get(i)?.get(`${r}.${e}`),c=(s?.touched||s?.dirty)&&s?.invalid,p=document.getElementById(`${i}-${r}-${e}`);return c?p?.classList.add("is-invalid"):(s?.touched||s?.dirty)&&s?.valid?(p?.classList.remove("is-invalid"),p?.classList.add("is-valid")):(p?.classList.remove("is-invalid"),p?.classList.remove("is-valid")),c||!1}enviar(){if(!this.form.valid)return void this.form.markAllAsTouched();this.cargandoOperacion=!0;let e=this.form.getRawValue();this.servicioR.registrarRendicion(e).subscribe({next:i=>{this.cargandoOperacion=!1,this.mensajeAlertify.mensajeExito(`${i.msg}`),this.consultarDetalle()},error:i=>{i.forEach(r=>{this.mensajeAlertify.mensajeError(r)}),this.cargandoOperacion=!1}})}consultarDetalle(){this.cargandoTabla=!0,this.servicioR.obtenerDatosDinero().subscribe({next:e=>{this.descripcion=e.descripcion,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,e.mostrar?(this.invHabilitado=!0,this.dineros=e.dineros,console.log(e.dineros),this.dineroControles=this.form.get("dineroControles"),this.dineros.forEach(i=>{const r=this.dineroControles.controls.find(s=>s.get("idBillete")?.value===i.idBillete);if(r instanceof n.cw)r.get("cantidad")?.setValue(0),r.get("observacion")?.setValue(""),r.markAsUntouched(),r.markAsPristine(),r.updateValueAndValidity();else{const s=this.fb.group({monto:[i.monto],cantidad:[0,[n.kI.required,n.kI.min(0)]],observacion:[""],idBillete:[i.idBillete],entrada:[i.entrada]});this.dineroControles.push(s)}})):this.invHabilitado=!1,this.cargandoTabla=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoTabla=!1}})}calcularTotalCaja(){let e=0,i=0,r=0,s=0;return this.dineroControles=this.form.get("dineroControles"),this.dineroControles.controls.forEach(c=>{i=c.get("cantidad")?.value,r=c.get("monto")?.value,s=c.get("entrada")?.value,3!=s&&(e+=i*r)}),e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.v),t.Y36(v),t.Y36(n.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rendicion-caja"]],decls:16,vars:13,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center","mt-3","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],[1,"mt-3","fw-bold",3,"ngClass"],["class","col offset-md-9 col-md-3",4,"ngIf"],["class","text-center",4,"ngIf"],["class","col-12",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"text-secondary","mt-3"],[1,"col","offset-md-9","col-md-3"],[1,"d-grid","gap-2","my-2"],[1,"btn","btn-danger",3,"click"],[1,"text-center"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["role","status",1,"spinner-border","text-danger",2,"width","3rem","height","3rem"],[3,"formGroup"],["formArrayName","dineroControles"],["datatable","",1,"table","hover","mt-2",3,"dtOptions"],[1,"bg-warning"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"text-start"],[1,"text-end"],[1,"col-2"],["type","number","formControlName","cantidad",1,"form-control",3,"id"],["class","e-mensaje-error",4,"ngIf"],["type","text","formControlName","observacion",1,"form-control"],[1,"e-mensaje-error"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.qZA(),t.YNc(5,R,3,3,"h6",4),t.YNc(6,N,2,1,"h6",4),t.YNc(7,O,3,3,"h6",4),t.TgZ(8,"h6",5),t._uU(9),t.qZA()(),t.YNc(10,j,4,0,"div",6),t.TgZ(11,"div",2),t.YNc(12,E,4,0,"div",7),t.qZA(),t.YNc(13,w,5,0,"div",8),t.TgZ(14,"div",2),t.YNc(15,Q,15,3,"form",9),t.qZA()()()),2&e&&(t.xp6(4),t.Oqu("Detalle de caja"),t.xp6(1),t.Q6J("ngIf",i.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.idCabeceraInv),t.xp6(1),t.Q6J("ngIf",i.invHabilitado),t.xp6(1),t.Q6J("ngClass",t.WLB(10,L,!i.invHabilitado,i.invHabilitado)),t.xp6(1),t.Oqu(i.descripcion),t.xp6(1),t.Q6J("ngIf",i.invHabilitado),t.xp6(2),t.Q6J("ngIf",i.cargandoOperacion),t.xp6(1),t.Q6J("ngIf",i.cargandoTabla),t.xp6(2),t.Q6J("ngIf",i.invHabilitado))},dependencies:[d.mk,d.sg,d.O5,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,n.x0,n.CE,_.G,d.JJ,d.rS,d.uU]}),o})();function M(o,a){if(1&o&&(t.TgZ(0,"h6",9),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.fechaApertura),"")}}function F(o,a){if(1&o&&(t.TgZ(0,"h6",9),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.idCabeceraInv,"")}}function z(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"button",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.enviar())}),t._uU(3,"Enviar"),t.qZA()()()}}function V(o,a){1&o&&(t.TgZ(0,"div",13)(1,"div",14)(2,"span",15),t._uU(3,"Loading..."),t.qZA()()())}function H(o,a){1&o&&(t.TgZ(0,"div",2)(1,"div",13)(2,"div",16)(3,"span",15),t._uU(4,"Loading..."),t.qZA()()()())}function G(o,a){if(1&o&&(t.TgZ(0,"span",29),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.Oqu(i.mensaje(e.idProducto.toString()))}}function B(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td",25),t._uU(5),t.ALo(6,"number"),t.qZA(),t.TgZ(7,"td",26)(8,"div"),t._UZ(9,"input",27),t.YNc(10,G,2,1,"span",28),t.qZA()()()),2&o){const e=a.$implicit,i=t.oxw(3);t.xp6(2),t.Oqu(t.lcZ(3,5,e.nombre)),t.xp6(3),t.Oqu(t.lcZ(6,7,e.precio)),t.xp6(4),t.s9C("formControlName",e.idProducto),t.Q6J("id",e.idProducto),t.xp6(1),t.Q6J("ngIf",i.datoInvalido(e.idProducto.toString()))}}function K(o,a){if(1&o&&(t.TgZ(0,"form",18)(1,"div",19)(2,"div",20)(3,"table",21)(4,"thead",22)(5,"tr")(6,"th",13),t._uU(7,"Nombre"),t.qZA(),t.TgZ(8,"th",13),t._uU(9,"Precio"),t.qZA(),t.TgZ(10,"th",13),t._uU(11,"Cantidad"),t.qZA()()(),t.TgZ(12,"tbody"),t.YNc(13,B,11,9,"tr",23),t.qZA()()()()()),2&o){const e=t.oxw(2);t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("dtOptions",e.dtOptions),t.xp6(10),t.Q6J("ngForOf",e.productos)}}function X(o,a){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,K,14,3,"form",17),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.invHabilitado)}}const W=function(o,a){return{"text-danger":o,"text-secondary":a}};let tt=(()=>{class o{constructor(e,i){this.mensajeAlertify=e,this.servicioI=i,this.productos=[],this.cargandoTabla=!1,this.invHabilitado=!1,this.descripcion="",this.form=new n.cw({}),this.dtOptions={paging:!1,info:!1,responsive:!0,searching:!1,ordering:!1,language:{search:"Buscar:",zeroRecords:"No se encontraron resultados",info:"Mostrando _START_ a _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",infoFiltered:"(filtrados de _MAX_ registros en total)",lengthMenu:"Mostrar _MENU_ registros",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"}}}}ngOnInit(){this.consultarDetalle()}mensaje(e){let i="";return this.form.get(e)?.hasError("min")&&(i="Minimo 0"),this.form.get(e)?.hasError("required")&&(i="Es requerido"),i}datoInvalido(e){let i=(this.form.get(e)?.touched||this.form.get(e)?.dirty)&&this.form.get(e)?.invalid,r=document.getElementById(e);return i?r?.classList.add("is-invalid"):(this.form.get(e)?.touched||this.form.get(e)?.dirty)&&this.form.get(e)?.valid?(r?.classList.remove("is-invalid"),r?.classList.add("is-valid")):(r?.classList.remove("is-invalid"),r?.classList.remove("is-valid")),i}enviar(){this.form.valid?(this.cargandoOperacion=!0,this.servicioI.registrarInventario({productos:this.form.value}).subscribe({next:i=>{this.cargandoOperacion=!1,this.mensajeAlertify.mensajeExito(`${i.msg}`),this.consultarDetalle()},error:i=>{i.forEach(r=>{this.mensajeAlertify.mensajeError(r)}),this.cargandoOperacion=!1}})):this.form.markAllAsTouched()}consultarDetalle(){this.cargandoTabla=!0,this.servicioI.obtenerDatosProducto().subscribe({next:e=>{this.descripcion=e.descripcion,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,e.mostrar?(this.invHabilitado=!0,this.productos=e.productos,this.productos.forEach(i=>{const r=i.idProducto.toString();this.form.contains(r)?(this.form.get(r)?.setValue(0),this.form.get(r)?.markAsUntouched(),this.form.get(r)?.markAsPristine(),this.form.get(r)?.updateValueAndValidity()):this.form.addControl(r,new n.NI(0,[n.kI.required,n.kI.min(0)]))})):this.invHabilitado=!1,this.cargandoTabla=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoTabla=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.v),t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-inventario-productos"]],decls:14,vars:12,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center","mt-3","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],[1,"mt-3","fw-bold",3,"ngClass"],["class","col offset-md-9 col-md-3",4,"ngIf"],["class","text-center",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-secondary","mt-3"],[1,"col","offset-md-9","col-md-3"],[1,"d-grid","gap-2","my-2"],[1,"btn","btn-danger",3,"click"],[1,"text-center"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["role","status",1,"spinner-border","text-danger",2,"width","3rem","height","3rem"],["class","",3,"formGroup",4,"ngIf"],[1,"",3,"formGroup"],[1,"outer-wrapper"],[1,"table-wrapper"],["datatable","",1,"table","hover",3,"dtOptions"],[1,"bg-warning"],[4,"ngFor","ngForOf"],[1,"text-start"],[1,"text-end"],[1,"col-2"],["type","number",1,"form-control",3,"formControlName","id"],["class","e-mensaje-error bg-success",4,"ngIf"],[1,"e-mensaje-error","bg-success"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.qZA(),t.YNc(5,M,3,3,"h6",4),t.YNc(6,F,2,1,"h6",4),t.TgZ(7,"h6",5),t._uU(8),t.qZA()(),t.YNc(9,z,4,0,"div",6),t.TgZ(10,"div",2),t.YNc(11,V,4,0,"div",7),t.qZA(),t.YNc(12,H,5,0,"div",8),t.YNc(13,X,2,1,"div",8),t.qZA()()),2&e&&(t.xp6(4),t.Oqu("Detalle de inventario"),t.xp6(1),t.Q6J("ngIf",i.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.idCabeceraInv),t.xp6(1),t.Q6J("ngClass",t.WLB(9,W,!i.invHabilitado,i.invHabilitado)),t.xp6(1),t.Oqu(i.descripcion),t.xp6(1),t.Q6J("ngIf",i.invHabilitado),t.xp6(2),t.Q6J("ngIf",i.cargandoOperacion),t.xp6(1),t.Q6J("ngIf",i.cargandoTabla),t.xp6(1),t.Q6J("ngIf",!i.cargandoTabla&&!i.cargandoOperacion))},dependencies:[d.mk,d.sg,d.O5,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,_.G,d.JJ,d.rS,d.uU]}),o})();function et(o,a){if(1&o&&(t.TgZ(0,"h6",9),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.datosCabecera.fechaApertura),"")}}function ot(o,a){if(1&o&&(t.TgZ(0,"h6",9),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.datosCabecera.idCabeceraInv,"")}}function it(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",10)(1,"div",11)(2,"label",12),t._uU(3,"Sucursal"),t.qZA(),t._UZ(4,"input",13),t.qZA(),t.TgZ(5,"div",14)(6,"label",15),t._uU(7,"Observacion"),t.qZA(),t._UZ(8,"input",16),t.qZA(),t.TgZ(9,"div",17)(10,"button",18),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.guardar())}),t._uU(11,"Registrar"),t.qZA()()()}}function rt(o,a){1&o&&(t.TgZ(0,"div",6)(1,"div",19)(2,"div",20)(3,"span",21),t._uU(4,"Loading..."),t.qZA()()()())}function at(o,a){1&o&&(t.TgZ(0,"div",6)(1,"div",19)(2,"div",20)(3,"span",21),t._uU(4,"Loading..."),t.qZA()()()())}const nt=function(o,a){return{"text-danger":o,"text-secondary":a}};let st=(()=>{class o{constructor(e,i,r){this.formulario=e,this.mensajeAlertify=i,this.servicioI=r,this.cargandoOperacion=!1,this.cargandoDatos=!0,this.datosCabecera={mostrar:!1,descripcion:""}}ngOnInit(){this.form=this.formulario.group({nombreSucursal:[""],observacion:[""]}),this.form.get("nombreSucursal")?.disable(),this.consultarApertura()}guardar(){this.cargandoOperacion=!0;let{...e}=this.form.value;this.servicioI.crearApertura(e).subscribe({next:i=>{this.cargandoOperacion=!1,this.mensajeAlertify.mensajeExito(`${i.msg}`),this.consultarApertura()},error:i=>{i.forEach(r=>{this.mensajeAlertify.mensajeError(r)}),this.cargandoOperacion=!1}})}consultarApertura(){this.cargandoDatos=!0,this.servicioI.obtenerDatosCabecera().subscribe({next:e=>{console.log(e),this.datosCabecera=e,this.datosCabecera.mostrar&&this.form.get("nombreSucursal")?.setValue(e.sucursal?.nombre),this.cargandoDatos=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoDatos=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(n.qu),t.Y36(m.v),t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-inv-rend-cabecera"]],decls:13,vars:11,consts:[[1,"container"],[1,"row","g-3",3,"formGroup"],[1,"col-12","pt-3"],[1,"text-center","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],[1,"mt-3","fw-bold",3,"ngClass"],[1,"col-12"],["class","row g-3",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-secondary","mt-3"],[1,"row","g-3"],[1,"col-md-4"],["for","nombre",1,"form-label"],["formControlName","nombreSucursal","type","text","id","nombreSucursal",1,"form-control"],[1,"col-md-8"],["for","precio",1,"form-label"],["formControlName","observacion","type","text","id","observacion",1,"form-control"],[1,"col-md-12","py-3","text-end"],[1,"btn","btn-warning",3,"click"],[1,"text-center"],["role","status",1,"spinner-border","text-danger",2,"width","3rem","height","3rem"],[1,"visually-hidden"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"h1",3),t._uU(4,"Datos de la Apertura"),t.qZA(),t.YNc(5,et,3,3,"h6",4),t.YNc(6,ot,2,1,"h6",4),t.TgZ(7,"h6",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",6),t.YNc(10,it,12,0,"div",7),t.qZA(),t.YNc(11,rt,5,0,"div",8),t.YNc(12,at,5,0,"div",8),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(4),t.Q6J("ngIf",i.datosCabecera.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.datosCabecera.idCabeceraInv),t.xp6(1),t.Q6J("ngClass",t.WLB(8,nt,!i.datosCabecera.mostrar,i.datosCabecera.mostrar)),t.xp6(1),t.Oqu(i.datosCabecera.descripcion),t.xp6(2),t.Q6J("ngIf",1==i.datosCabecera.mostrar),t.xp6(1),t.Q6J("ngIf",i.cargandoDatos),t.xp6(1),t.Q6J("ngIf",i.cargandoOperacion))},dependencies:[d.mk,d.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,d.uU]}),o})();var I=u(7579),q=u(2550);let U=(()=>{class o{constructor(e,i,r){this.http=e,this.errorS=i,this.autService=r,this.apiUrl=`${Z.N.API_URL}/api`}getItems(){const e=localStorage.getItem("productosRecepcion");if(e){const{fecha:i,items:r,observacion:s,nroComprobante:c,uId:p}=JSON.parse(e),T=new Date(i),fe=new Date;if(T.toDateString()===fe.toDateString()&&p==this.autService.usuario.idUsuario)return{items:r,observacion:s,nroComprobante:c}}return{}}saveItems(e,i="",r=""){const c={fecha:(new Date).toISOString(),items:e,observacion:i,nroComprobante:r,uId:this.autService.usuario.idUsuario};localStorage.setItem("productosRecepcion",JSON.stringify(c))}removerItems(){localStorage.removeItem("productosRecepcion")}verExiteApertura(){return this.http.get(`${this.apiUrl}/recepciones/verExisteApertura`).pipe((0,l.K)(this.errorS.handleError))}productosRecepcion(){return this.http.get(`${this.apiUrl}/inventarios/productosInventario`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatos(){return this.verExiteApertura().pipe((0,h.w)(e=>e.habilitado?this.productosRecepcion().pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,producto:i.producto,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura,proximoNroComprobante:e.proximoNroComprobante}))):(0,g.of)({mostrar:!1,descripcion:e.descripcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))}registrarRecepcion(e){return this.http.post(`${this.apiUrl}/recepciones/registrarRecepcion`,{...e}).pipe((0,l.K)(this.errorS.handleError))}visualizacionDisponible(){return this.http.get(`${this.apiUrl}/recepciones/visualizacionDisponible`).pipe((0,l.K)(this.errorS.handleError))}visualizarRecepciones(){return this.http.get(`${this.apiUrl}/recepciones/visualizarRecepciones`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatosVisualizar(){return this.visualizacionDisponible().pipe((0,h.w)(e=>e.habilitado?this.visualizarRecepciones().pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,drecepcion:i.dRecepcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura}))):(0,g.of)({mostrar:!1,descripcion:e.descripcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.eN),t.LFG(A.g),t.LFG(q.Q))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function ct(o,a){if(1&o&&(t.TgZ(0,"h6",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.fechaApertura),"")}}function dt(o,a){if(1&o&&(t.TgZ(0,"h6",17),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.idCabeceraInv,"")}}function lt(o,a){if(1&o&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.descripcion)}}function ut(o,a){if(1&o&&(t.TgZ(0,"small",52),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("nroComprobante"))}}function pt(o,a){if(1&o&&(t.TgZ(0,"small",52),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("observacion"))}}function mt(o,a){if(1&o&&(t.TgZ(0,"small",52),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("idProducto"))}}function ht(o,a){if(1&o&&(t.TgZ(0,"small",52),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("nombre"))}}function ft(o,a){if(1&o&&(t.TgZ(0,"small",52),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("cantidad"))}}function gt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",53)(1,"div",54)(2,"div",50)(3,"label",55),t._uU(4,"Buscar"),t.qZA(),t.TgZ(5,"button",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.buscar())}),t._UZ(6,"i",57),t.qZA()(),t.TgZ(7,"div",50)(8,"label",55),t._uU(9,"Agregar"),t.qZA(),t.TgZ(10,"button",56),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.agregar())}),t._UZ(11,"i",58),t.qZA()()()()}}function _t(o,a){1&o&&(t.TgZ(0,"div",50)(1,"div",59)(2,"span",60),t._uU(3,"Loading..."),t.qZA()()())}function vt(o,a){1&o&&(t.TgZ(0,"div",23)(1,"div",50)(2,"div",61)(3,"span",60),t._uU(4,"Loading..."),t.qZA()()()())}function bt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td",50),t._uU(5),t.qZA(),t.TgZ(6,"td",50)(7,"button",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.confirmarEliminacion(s))}),t._UZ(8,"i",63),t.qZA()(),t.TgZ(9,"td",50)(10,"button",64),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.modificar(s))}),t._UZ(11,"i",65),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,e.nombre)),t.xp6(3),t.Oqu(e.cantidad)}}function Zt(o,a){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,bt,12,4,"tr",62),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.productosRecibidos)}}function xt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"button",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.guardar())}),t._uU(3,"Enviar"),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.borrarDatos())}),t._uU(5,"Cancelar"),t.qZA()(),t.TgZ(6,"div",23)(7,"h4",24),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"form",25)(11,"div",26)(12,"div",27)(13,"label",28),t._uU(14,"Nro. Comprobante"),t.qZA(),t._UZ(15,"input",29),t.YNc(16,ut,2,1,"small",30),t.qZA(),t.TgZ(17,"div",31)(18,"label",32),t._uU(19,"Observacion"),t.qZA(),t._UZ(20,"input",33),t.YNc(21,pt,2,1,"small",30),t.qZA()()(),t._UZ(22,"hr"),t.TgZ(23,"div",19)(24,"div",31)(25,"form",34)(26,"div",26)(27,"div",27)(28,"label",35),t._uU(29,"Id"),t.qZA(),t.TgZ(30,"input",36),t.NdJ("keydown",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onInputClick(r))}),t.qZA(),t.YNc(31,mt,2,1,"small",30),t.qZA(),t.TgZ(32,"div",37)(33,"label",38),t._uU(34,"Nombre"),t.qZA(),t._UZ(35,"input",39),t.YNc(36,ht,2,1,"small",30),t.qZA(),t.TgZ(37,"div",40)(38,"label",41),t._uU(39,"Cantidad"),t.qZA(),t._UZ(40,"input",42),t.YNc(41,ft,2,1,"small",30),t.qZA()()()(),t.YNc(42,gt,12,0,"div",43),t.qZA(),t._UZ(43,"br")(44,"hr"),t.qZA(),t.TgZ(45,"div",44)(46,"div",45)(47,"button",46),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nuevo())}),t._uU(48,"Nuevo"),t.qZA()()(),t.TgZ(49,"div",23),t.YNc(50,_t,4,0,"div",47),t.qZA(),t.YNc(51,vt,5,0,"div",48),t.TgZ(52,"div",23)(53,"div",12)(54,"table",49)(55,"thead")(56,"tr")(57,"th",50),t._uU(58," Nombre"),t.qZA(),t.TgZ(59,"th",50),t._uU(60," Cantidad "),t.qZA(),t.TgZ(61,"th",50),t._uU(62," Eliminar "),t.qZA(),t.TgZ(63,"th",50),t._uU(64," Modificar "),t.qZA()()(),t.YNc(65,Zt,2,1,"tbody",51),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(8),t.hij("Accion: ",t.lcZ(9,14,e.accion),""),t.xp6(2),t.Q6J("formGroup",e.formCabecera),t.xp6(6),t.Q6J("ngIf",e.datoInvalido("nroComprobante")),t.xp6(5),t.Q6J("ngIf",e.datoInvalido("observacion")),t.xp6(4),t.Q6J("formGroup",e.formRecepcion),t.xp6(6),t.Q6J("ngIf",e.datoInvalido("idProducto")),t.xp6(5),t.Q6J("ngIf",e.datoInvalido("nombre")),t.xp6(5),t.Q6J("ngIf",e.datoInvalido("cantidad")),t.xp6(1),t.Q6J("ngIf",!e.cargandoProductos),t.xp6(8),t.Q6J("ngIf",e.cargandoOperacion),t.xp6(1),t.Q6J("ngIf",e.cargandoProductos||e.cargandoTabRecepcion),t.xp6(3),t.Q6J("dtOptions",e.dtOptionsRecepcion)("dtTrigger",e.dtTrigger),t.xp6(11),t.Q6J("ngIf",!e.cargandoTabRecepcion)}}function At(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td",50)(10,"button",56),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.seleccionarProducto(s))}),t._UZ(11,"i",65),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.idProducto),t.xp6(2),t.Oqu(t.lcZ(5,3,e.nombre)),t.xp6(3),t.Oqu(t.lcZ(8,5,e.precio))}}function Tt(o,a){if(1&o&&(t.TgZ(0,"table",66)(1,"thead")(2,"tr")(3,"th",50),t._uU(4," Id "),t.qZA(),t.TgZ(5,"th",50),t._uU(6," Nombre"),t.qZA(),t.TgZ(7,"th",50),t._uU(8," Precio "),t.qZA(),t.TgZ(9,"th",50),t._uU(10,"Seleccionar"),t.qZA()()(),t.TgZ(11,"tbody"),t.YNc(12,At,12,7,"tr",62),t.qZA()()),2&o){const e=t.oxw();t.Q6J("dtOptions",e.dtOptionsProductos),t.xp6(12),t.Q6J("ngForOf",e.productos)}}let Ct=(()=>{class o{constructor(e,i,r,s,c){this.mensajeAlertify=e,this.fb=i,this.servicioP=r,this.detectorCambio=s,this.servicioC=c,this.dtOptionsRecepcion={paging:!1,info:!1,responsive:!1,searching:!1,language:{search:"Buscar:",zeroRecords:"No se encontraron resultados",info:"Mostrando _START_ a _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",infoFiltered:"(filtrados de _MAX_ registros en total)",lengthMenu:"Mostrar _MENU_ registros",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No se han agregado registros",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"}}},this.dtTrigger=new I.x,this.dtOptionsProductos={paging:!1,info:!1,responsive:!1,language:{search:"Buscar:",zeroRecords:"No se encontraron resultados",info:"Mostrando _START_ a _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",infoFiltered:"(filtrados de _MAX_ registros en total)",lengthMenu:"Mostrar _MENU_ registros",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"}}},this.formCabecera=this.fb.group({observacion:[""],nroComprobante:["",[n.kI.required]]}),this.formRecepcion=this.fb.group({idProducto:["",[n.kI.required]],nombre:["",[n.kI.required]],cantidad:["",[n.kI.required,n.kI.min(1)]]}),this.invHabilitado=!1,this.descripcion="",this.productos=[],this.productosRecibidos=[],this.accion="Crear",this.cargandoTabRecepcion=!1,this.cargandoOperacion=!1,this.cargandoProductos=!1}ngOnInit(){this.formRecepcion.get("nombre")?.disable(),this.cargandoProductos=!0,this.cargandoTabRecepcion=!0,this.servicioP.obtenerDatos().subscribe({next:e=>{if(this.cargandoProductos=!1,this.invHabilitado=e.mostrar,this.descripcion=e.descripcion,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,this.invHabilitado){this.productos=e.producto,this.proximoNroComprobante=e.proximoNroComprobante,this.formCabecera.get("nroComprobante")?.setValue(this.proximoNroComprobante.toString());let i=this.servicioP.getItems();i.items&&(this.productosRecibidos=i.items)}this.cargandoProductos=!1,this.establecerDatos(),this.cargandoTabRecepcion=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoProductos=!1}})}establecerDatos(){this.detectorCambio.detectChanges(),this.dtTrigger.next(0)}renderizar(){this.dtElement.dtInstance.then(e=>{e.destroy()})}ngOnDestroy(){this.dtTrigger.unsubscribe()}mostrarModal(e,i){i?$(`#${e}`).modal("show"):$(`#${e}`).modal("hide")}agregar(){if(!(this.formRecepcion.get("idProducto")?.value||this.formRecepcion.get("nombre")?.value||this.idProductoSeleccionado))return void this.mensajeAlertify.mensajeError("Seleccione el producto");if(!this.formRecepcion.valid)return void this.formRecepcion.markAllAsTouched();let{observacion:e,nroComprobante:i}=this.formCabecera.value;e=e??"",i=i??"";let r=this.formRecepcion.value;r.idProducto=this.idProductoSeleccionado,r.nombre=this.formRecepcion.get("nombre")?.value,console.log(r);let s=!1;"Crear"==this.accion?(this.cargandoTabRecepcion=!0,this.productosRecibidos.forEach((c,p)=>{c.idProducto==r.idProducto&&(this.productosRecibidos[p].cantidad=this.productosRecibidos[p].cantidad+r.cantidad,s=!0)}),s||this.productosRecibidos.push(r),this.dtElement.dtInstance.then(c=>{c.destroy(),this.dtTrigger.next(0)}),this.cargandoTabRecepcion=!1):"Modificar"==this.accion&&this.productosRecibidos.forEach((c,p)=>{c.idProducto==r.idProducto&&(this.productosRecibidos[p]=this.formRecepcion.value)}),this.limpiarDetalle(),this.accion="Crear",this.servicioP.saveItems(this.productosRecibidos,e,i)}nuevo(){this.accion="Crear",this.limpiarDetalle()}confirmarEliminacion(e){this.mensajeAlertify.mensajeConfirmacion(`Desea quitar el producto ${e.nombre} ?`,()=>this.eliminar(e.idProducto))}eliminar(e){this.accion="Eliminar";let{observacion:i,nroComprobante:r}=this.formCabecera.value;i=i??"",r=r??"",this.cargandoTabRecepcion=!0,this.productosRecibidos.forEach((s,c)=>{s.idProducto==e&&this.productosRecibidos.splice(c,1)}),this.dtElement.dtInstance.then(s=>{s.destroy(),this.dtTrigger.next(0)}),this.cargandoTabRecepcion=!1,this.accion="Crear",this.servicioP.saveItems(this.productosRecibidos,i,r)}modificar(e){this.accion="Modificar",this.formRecepcion.setValue(e)}buscar(){this.mostrarModal("smodal",!0)}seleccionarProducto(e){this.idProductoSeleccionado=e.idProducto,this.formRecepcion.get("idProducto")?.setValue(e.idProducto),this.formRecepcion.get("nombre")?.setValue(e.nombre),this.mostrarModal("smodal",!1)}mensaje(e){let i="";return this.formRecepcion.get(e)?.hasError("required")&&"cantidad"==e&&(i="La cantidad es requerida.."),this.formRecepcion.get(e)?.hasError("min")&&"cantidad"==e&&(i="La cantidad m\xednima es 0"),i}datoInvalido(e){let i=(this.formRecepcion.get(e)?.touched||this.formRecepcion.get(e)?.dirty)&&this.formRecepcion.get(e)?.invalid,r=document.getElementById(e);return i?r?.classList.add("is-invalid"):(this.formRecepcion.get(e)?.touched||this.formRecepcion.get(e)?.dirty)&&this.formRecepcion.get(e)?.valid?(r?.classList.remove("is-invalid"),r?.classList.add("is-valid")):(r?.classList.remove("is-invalid"),r?.classList.remove("is-valid")),i}guardar(){if(this.productosRecibidos.length<1)return void this.mensajeAlertify.mensajeError("Agregue al menos 1 producto !!");if(!this.formCabecera.valid)return void this.mensajeAlertify.mensajeError("Agregue el N\xfamero de comprobante !!");let e={nroComprobante:this.formCabecera.value.nroComprobante||"",observacion:this.formCabecera.value.observacion||"",productos:this.productosRecibidos};this.cargandoOperacion=!0,this.servicioP.registrarRecepcion(e).subscribe({next:i=>{this.cargandoOperacion=!1,this.mensajeAlertify.mensajeExito(`${i.msg}`),this.borrarDatos(),this.formCabecera.get("nroComprobante")?.setValue((this.proximoNroComprobante+1).toString())},error:i=>{i.forEach(r=>{this.mensajeAlertify.mensajeError(r)}),this.cargandoOperacion=!1}})}borrarDatos(){this.servicioP.removerItems(),this.formCabecera.reset(),this.formRecepcion.reset(),this.cargandoTabRecepcion=!0,this.productosRecibidos=[],this.dtElement.dtInstance.then(e=>{e.destroy(),console.log("Destruyendo.."),this.dtTrigger.next(0)}),this.cargandoTabRecepcion=!1}limpiarDetalle(){this.formRecepcion.reset()}onInputClick(e){"Enter"===e.key&&(console.log("Se presion\xf3 Enter"),this.obtenerProducto())}obtenerProducto(){let e=this.formRecepcion.get("idProducto")?.value;e?this.servicioC.obtenerProductoPorId(e).subscribe({next:i=>{this.formRecepcion.get("nombre")?.setValue(i.nombre),this.idProductoSeleccionado=e},error:i=>{i.forEach(r=>{this.mensajeAlertify.mensajeError(r)}),this.cargandoOperacion=!1}}):this.mensajeAlertify.mensajeError("Establezca el id de Producto - "+e)}obtenerDatosRec(){this.cargandoProductos=!0,this.cargandoTabRecepcion=!0,this.servicioP.obtenerDatos().subscribe({next:e=>{if(this.cargandoProductos=!1,this.invHabilitado=e.mostrar,this.descripcion=e.descripcion,this.invHabilitado){this.productos=e.producto,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,this.formCabecera.get("nroComprobante")?.setValue(e.proximoNroComprobante.toString());let i=this.servicioP.getItems();i.items&&(this.productosRecibidos=i.items)}this.cargandoProductos=!1,this.establecerDatos(),this.cargandoTabRecepcion=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoProductos=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.v),t.Y36(n.qu),t.Y36(U),t.Y36(t.sBO),t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-recepcion-productos"]],viewQuery:function(e,i){if(1&e&&t.Gf(_.G,5),2&e){let r;t.iGM(r=t.CRH())&&(i.dtElement=r.first)}},decls:22,vars:5,consts:[[1,"container","mt-2"],[1,"text-center","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],["class","text-danger mt-3  fw-bold",4,"ngIf"],["class","row",4,"ngIf"],["id","smodal","tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table-responsive"],["class","table","datatable","",3,"dtOptions",4,"ngIf"],[1,"modal-footer"],[1,"btn","e-tercer-boton"],[1,"btn","e-primer-boton"],[1,"text-secondary","mt-3"],[1,"text-danger","mt-3","fw-bold"],[1,"row"],[1,"col-12","d-flex","justify-content-end","my-3"],[1,"btn","btn-warning","me-2",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"col-12"],[1,"text-secondary"],[1,"mt-3",3,"formGroup"],[1,"row","g-3"],[1,"col-md-3"],["for","nroComprobante",1,"form-label"],["formControlName","nroComprobante","type","number","id","nroComprobante",1,"form-control"],["class","e-mensaje-error",4,"ngIf"],[1,"col-md-9"],["for","observacion",1,"form-label"],["formControlName","observacion","type","text","id","observacion",1,"form-control"],[3,"formGroup"],["for","idProducto",1,"form-label"],["formControlName","idProducto","type","number","id","idProducto",1,"form-control",3,"keydown"],[1,"col-md-6"],["for","nombre",1,"form-label"],["formControlName","nombre","type","text","id","nombre",1,"form-control"],[1,"col-md-3","col-xl-3"],["for","cantidad",1,"form-label"],["formControlName","cantidad","type","number","id","cantidad",1,"form-control"],["class","col-md-3 col-xl-2",4,"ngIf"],[1,"col-12","offset-md-9","col-md-3"],[1,"d-grid","gap-2"],[1,"btn","e-tercer-boton","fw-bold","my-4",3,"click"],["class","text-center",4,"ngIf"],["class","col-12",4,"ngIf"],["datatable","",1,"table","hover",3,"dtOptions","dtTrigger"],[1,"text-center"],[4,"ngIf"],[1,"e-mensaje-error"],[1,"col-md-3","col-xl-2"],[1,"d-grid","gap-2","d-flex","justify-content-end"],["for","cantidad",1,"form-label","fw-bold","d-block"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-search"],[1,"bi","bi-plus-square"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["role","status",1,"spinner-border","text-danger",2,"width","3rem","height","3rem"],[4,"ngFor","ngForOf"],[1,"bi","bi-trash3"],[1,"btn","btn-warning",3,"click"],[1,"bi","bi-arrow-up-right-square"],["datatable","",1,"table",3,"dtOptions"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Recepcion de productos"),t.qZA(),t.YNc(3,ct,3,3,"h6",2),t.YNc(4,dt,2,1,"h6",2),t.YNc(5,lt,2,1,"p",3),t.YNc(6,xt,66,16,"div",4),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h1",9),t._uU(12,"Productos"),t.qZA(),t._UZ(13,"button",10),t.qZA(),t.TgZ(14,"div",11)(15,"div",12),t.YNc(16,Tt,13,2,"table",13),t.qZA()(),t.TgZ(17,"div",14)(18,"button",15),t._uU(19,"guardar"),t.qZA(),t.TgZ(20,"button",16),t._uU(21,"Eliminar"),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.idCabeceraInv),t.xp6(1),t.Q6J("ngIf",!i.invHabilitado),t.xp6(1),t.Q6J("ngIf",i.invHabilitado),t.xp6(10),t.Q6J("ngIf",i.productos.length>0))},dependencies:[d.sg,d.O5,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.sg,n.u,_.G,d.JJ,d.rS,d.uU]}),o})();var It=u(4128);let y=(()=>{class o{constructor(e,i,r){this.http=e,this.errorS=i,this.autService=r,this.apiUrl=`${Z.N.API_URL}/api`}getItems(){const e=localStorage.getItem("productosBaja");if(e){const{fecha:i,items:r,observacion:s,uId:c}=JSON.parse(e),p=new Date(i),T=new Date;if(p.toDateString()===T.toDateString()&&c==this.autService.usuario.idUsuario)return{items:r,observacion:s}}return{}}saveItems(e,i=""){const s={fecha:(new Date).toISOString(),items:e,observacion:i,uId:this.autService.usuario.idUsuario};localStorage.setItem("productosBaja",JSON.stringify(s))}removerItems(){localStorage.removeItem("productosBaja")}verExiteApertura(){return this.http.get(`${this.apiUrl}/salidas/verExisteApertura`).pipe((0,l.K)(this.errorS.handleError))}productosSalida(){return this.http.get(`${this.apiUrl}/inventarios/productosInventario`).pipe((0,l.K)(this.errorS.handleError))}tiposSalida(){return this.http.get(`${this.apiUrl}/salidas/tiposSalida`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatos(){return this.verExiteApertura().pipe((0,h.w)(e=>e.habilitado?(0,It.D)([this.productosSalida(),this.tiposSalida()]).pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,producto:i[0].producto,salida:i[1].salida,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura}))):(0,g.of)({mostrar:!1,descripcion:e.descripcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))}registrarSalida(e){return console.log(e),this.http.post(`${this.apiUrl}/salidas/registrarSalida`,{...e}).pipe((0,l.K)(this.errorS.handleError))}visualizacionDisponible(){return this.http.get(`${this.apiUrl}/salidas/visualizacionDisponible`).pipe((0,l.K)(this.errorS.handleError))}visualizarSalidas(){return this.http.get(`${this.apiUrl}/salidas/visualizarSalidas`).pipe((0,l.K)(this.errorS.handleError))}obtenerDatosVisualizar(){return this.visualizacionDisponible().pipe((0,h.w)(e=>e.habilitado?this.visualizarSalidas().pipe((0,f.U)(i=>({mostrar:!0,descripcion:e.descripcion,dsalida:i.dSalida,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura}))):(0,g.of)({mostrar:!1,descripcion:e.descripcion,idCabeceraInv:e.idCabeceraInv,fechaApertura:e.fechaApertura})))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(x.eN),t.LFG(A.g),t.LFG(q.Q))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function qt(o,a){if(1&o&&(t.TgZ(0,"h6",17),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.fechaApertura),"")}}function Ut(o,a){if(1&o&&(t.TgZ(0,"h6",17),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.idCabeceraInv,"")}}function yt(o,a){if(1&o&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.descripcion)}}function Pt(o,a){if(1&o&&(t.TgZ(0,"small",59),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("observacion"))}}function St(o,a){if(1&o&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.Oqu(e.descripcion)}}function Rt(o,a){if(1&o&&(t.TgZ(0,"small",59),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("salida"))}}function Nt(o,a){if(1&o&&(t.TgZ(0,"small",59),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.mensaje("cantidad"))}}function Ot(o,a){1&o&&(t.TgZ(0,"div",47)(1,"div",61)(2,"span",62),t._uU(3,"Loading..."),t.qZA()()())}function jt(o,a){1&o&&(t.TgZ(0,"div",23)(1,"div",47)(2,"div",63)(3,"span",62),t._uU(4,"Loading..."),t.qZA()()()())}function Et(o,a){1&o&&(t.TgZ(0,"thead")(1,"tr")(2,"th",47),t._uU(3," Nombre"),t.qZA(),t.TgZ(4,"th",47),t._uU(5," Cantidad "),t.qZA(),t.TgZ(6,"th",47),t._uU(7," Descripcion "),t.qZA(),t.TgZ(8,"th",47),t._uU(9," Eliminar "),t.qZA(),t.TgZ(10,"th",47),t._uU(11," Modificar "),t.qZA()()())}function wt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"td",47),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",47)(9,"button",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.confirmarEliminacion(s))}),t._UZ(10,"i",65),t.qZA()(),t.TgZ(11,"td",47)(12,"button",66),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.modificar(s))}),t._UZ(13,"i",67),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,e.nombre)),t.xp6(3),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(e.salida.descripcion)}}function Jt(o,a){if(1&o&&(t.TgZ(0,"tbody"),t.YNc(1,wt,14,5,"tr",64),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.productosBaja)}}function Dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"button",21),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.guardar())}),t._uU(3,"Enviar"),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.borrarDatos())}),t._uU(5,"Borrar"),t.qZA()(),t.TgZ(6,"div",23)(7,"h4",24),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"form",25)(11,"div",26)(12,"div",27)(13,"label",28),t._uU(14,"Observacion"),t.qZA(),t._UZ(15,"input",29),t.YNc(16,Pt,2,1,"small",30),t.qZA()()(),t._UZ(17,"hr"),t.TgZ(18,"div",19)(19,"div",31)(20,"form",32)(21,"div",26)(22,"div",33)(23,"label",34),t._uU(24,"Id"),t.qZA(),t.TgZ(25,"input",35),t.NdJ("keydown",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onInputClick(r))}),t.qZA()(),t.TgZ(26,"div",36)(27,"label",37),t._uU(28,"Tipo Salida"),t.qZA(),t.TgZ(29,"select",38),t.YNc(30,St,2,2,"option",39),t.qZA(),t.YNc(31,Rt,2,1,"small",30),t.qZA(),t.TgZ(32,"div",40)(33,"label",41),t._uU(34,"Cantidad"),t.qZA(),t._UZ(35,"input",42),t.YNc(36,Nt,2,1,"small",30),t.qZA()(),t.TgZ(37,"div",36)(38,"label",43),t._uU(39,"Nombre"),t.qZA(),t._UZ(40,"input",44),t.qZA()()(),t.TgZ(41,"div",45)(42,"div",46)(43,"div",47)(44,"label",48),t._uU(45,"Buscar"),t.qZA(),t.TgZ(46,"button",49),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.buscar())}),t._UZ(47,"i",50),t.qZA()(),t.TgZ(48,"div",47)(49,"label",48),t._uU(50,"Agregar"),t.qZA(),t.TgZ(51,"button",49),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.agregar())}),t._UZ(52,"i",51),t.qZA()()()()()(),t.TgZ(53,"div",52)(54,"div",53)(55,"button",54),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nuevo())}),t._uU(56,"Nuevo"),t.qZA()()(),t.TgZ(57,"div",23),t.YNc(58,Ot,4,0,"div",55),t.qZA(),t.YNc(59,jt,5,0,"div",56),t.TgZ(60,"div",23)(61,"div",12)(62,"table",57),t.YNc(63,Et,12,0,"thead",58),t.YNc(64,Jt,2,1,"tbody",58),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(8),t.hij("Accion: ",t.lcZ(9,13,e.accion),""),t.xp6(2),t.Q6J("formGroup",e.formCabecera),t.xp6(6),t.Q6J("ngIf",e.datoInvalido("observacion")),t.xp6(4),t.Q6J("formGroup",e.formSalida),t.xp6(10),t.Q6J("ngForOf",e.salidas),t.xp6(1),t.Q6J("ngIf",e.datoInvalido("salida")),t.xp6(5),t.Q6J("ngIf",e.datoInvalido("cantidad")),t.xp6(22),t.Q6J("ngIf",e.cargandoOperacion),t.xp6(1),t.Q6J("ngIf",e.cargandoTablaSalida||e.cargandoTablaSalida),t.xp6(3),t.Q6J("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),t.xp6(1),t.Q6J("ngIf",!e.cargandoTablaSalida),t.xp6(1),t.Q6J("ngIf",!e.cargandoTablaSalida)}}function Yt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"titlecase"),t.qZA(),t.TgZ(12,"td",47)(13,"button",49),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.seleccionarProducto(s))}),t._UZ(14,"i",67),t.qZA()()()}if(2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.idProducto),t.xp6(2),t.Oqu(t.lcZ(5,4,e.nombre)),t.xp6(3),t.Oqu(t.lcZ(8,6,e.precio)),t.xp6(3),t.Oqu(t.lcZ(11,8,e.descripcion))}}function Qt(o,a){if(1&o&&(t.TgZ(0,"table",68)(1,"thead")(2,"tr")(3,"th",47),t._uU(4," Id "),t.qZA(),t.TgZ(5,"th",47),t._uU(6," Nombre"),t.qZA(),t.TgZ(7,"th",47),t._uU(8," Precio "),t.qZA(),t.TgZ(9,"th",47),t._uU(10," Descripicon "),t.qZA(),t.TgZ(11,"th",47),t._uU(12,"Seleccionar"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Yt,15,10,"tr",64),t.qZA()()),2&o){const e=t.oxw();t.Q6J("dtOptions",e.dtOptionsProductos),t.xp6(14),t.Q6J("ngForOf",e.productos)}}let Lt=(()=>{class o{constructor(e,i,r,s,c){this.mensajeAlertify=e,this.fb=i,this.servicioP=r,this.detectorCambio=s,this.servicioC=c,this.dtOptions={paging:!1,info:!1,responsive:!1,searching:!1,language:{search:"Buscar:",zeroRecords:"No se encontraron resultados",info:"Mostrando _START_ a _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",infoFiltered:"(filtrados de _MAX_ registros en total)",lengthMenu:"Mostrar _MENU_ registros",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No se han agregado registros",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"}}},this.dtTrigger=new I.x,this.dtOptionsProductos={paging:!1,info:!1,responsive:!1,language:{search:"Buscar:",zeroRecords:"No se encontraron resultados",info:"Mostrando _START_ a _END_ de _TOTAL_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",infoFiltered:"(filtrados de _MAX_ registros en total)",lengthMenu:"Mostrar _MENU_ registros",loadingRecords:"Cargando...",processing:"Procesando...",emptyTable:"No hay datos disponibles en la tabla",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"}}},this.formCabecera=this.fb.group({observacion:["",[n.kI.required]]}),this.formSalida=this.fb.group({idProducto:["",[n.kI.required]],nombre:["",[n.kI.required]],cantidad:["",[n.kI.required,n.kI.min(1)]],salida:["",[n.kI.required]]}),this.invHabilitado=!1,this.descripcion="",this.productos=[],this.productosBaja=[],this.accion="Crear",this.cargandoTablaSalida=!1,this.cargandoOperacion=!1,this.cargandoProductos=!1,this.salidas=[]}ngOnInit(){this.formSalida.get("nombre")?.disable(),this.cargandoProductos=!0,this.cargandoTablaSalida=!0,this.servicioP.obtenerDatos().subscribe({next:e=>{if(this.invHabilitado=e.mostrar,this.descripcion=e.descripcion,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,console.log(" this.idCabeceraInv",this.idCabeceraInv),this.invHabilitado){this.productos=e.producto,this.salidas=e.salida;let i=this.servicioP.getItems();i.items&&(this.productosBaja=i.items,this.formCabecera.get("observacion")?.setValue(i.observacion))}this.cargandoProductos=!1,this.establecerDatos(),this.cargandoTablaSalida=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoTablaSalida=!1}})}establecerDatos(){this.detectorCambio.detectChanges(),this.dtTrigger.next(0)}renderizar(){this.dtElement.dtInstance.then(e=>{e.destroy()})}ngOnDestroy(){this.dtTrigger.unsubscribe()}mostrarModal(e,i){i?$(`#${e}`).modal("show"):$(`#${e}`).modal("hide")}agregar(){if(!(this.formSalida.get("idProducto")?.value||this.formSalida.get("nombre")?.value||this.idProductoSeleccionado))return void this.mensajeAlertify.mensajeError("Seleccione el producto");if(!this.formSalida.valid)return void this.formSalida.markAllAsTouched();let{observacion:e}=this.formCabecera.value;e=e??"";let i=this.formSalida.value;i.idProducto=this.idProductoSeleccionado,i.nombre=this.formSalida.get("nombre")?.value;let r=!1;"Crear"==this.accion?(this.cargandoTablaSalida=!0,this.productosBaja.forEach((s,c)=>{s.idProducto==i.idProducto&&(this.productosBaja[c].cantidad=this.productosBaja[c].cantidad+i.cantidad,r=!0)}),r||this.productosBaja.push(i),this.dtElement.dtInstance.then(s=>{s.destroy(),this.dtTrigger.next(0)}),this.cargandoTablaSalida=!1):"Modificar"==this.accion&&this.productosBaja.forEach((s,c)=>{s.idProducto==i.idProducto&&(this.productosBaja[c]=this.formSalida.value)}),this.limpiarDetalle(),this.accion="Crear",this.servicioP.saveItems(this.productosBaja,e)}nuevo(){this.accion="Crear",this.limpiarDetalle()}confirmarEliminacion(e){this.mensajeAlertify.mensajeConfirmacion(`Desea quitar el producto ${e.nombre} ?`,()=>this.eliminar(e.idProducto))}eliminar(e){this.accion="Eliminar";let{observacion:i}=this.formCabecera.value;i=i??"",this.cargandoTablaSalida=!0,this.productosBaja.forEach((r,s)=>{r.idProducto==e&&this.productosBaja.splice(s,1)}),this.dtElement.dtInstance.then(r=>{r.destroy(),this.dtTrigger.next(0)}),this.cargandoTablaSalida=!1,this.accion="Crear",this.servicioP.saveItems(this.productosBaja,i)}modificar(e){this.accion="Modificar",this.formSalida.setValue(e)}buscar(){this.mostrarModal("smodal",!0)}seleccionarProducto(e){this.idProductoSeleccionado=e.idProducto,this.formSalida.get("idProducto")?.setValue(e.idProducto),this.formSalida.get("nombre")?.setValue(e.nombre),this.mostrarModal("smodal",!1)}mensaje(e){let i="";return this.formSalida.get(e)?.hasError("required")&&("cantidad"==e&&(i="La cantidad es requerida.."),"salida"==e&&(i="El tipo es requerido..")),this.formSalida.get(e)?.hasError("min")&&"cantidad"==e&&(i="La cantidad m\xednima es 0"),i}datoInvalido(e){let i=(this.formSalida.get(e)?.touched||this.formSalida.get(e)?.dirty)&&this.formSalida.get(e)?.invalid,r=document.getElementById(e);return i?r?.classList.add("is-invalid"):(this.formSalida.get(e)?.touched||this.formSalida.get(e)?.dirty)&&this.formSalida.get(e)?.valid?(r?.classList.remove("is-invalid"),r?.classList.add("is-valid")):(r?.classList.remove("is-invalid"),r?.classList.remove("is-valid")),i}guardar(){if(this.productosBaja.length<1)return void this.mensajeAlertify.mensajeError("Agregue al menos 1 producto !!");let e={observacion:this.formCabecera.value.observacion||"",productos:this.productosBaja};this.cargandoOperacion=!0,this.servicioP.registrarSalida(e).subscribe({next:i=>{this.cargandoOperacion=!1,this.mensajeAlertify.mensajeExito(`${i.msg}`),this.borrarDatos()},error:i=>{i.forEach(r=>{this.mensajeAlertify.mensajeError(r)}),console.log(i),this.cargandoOperacion=!1}})}borrarDatos(){this.servicioP.removerItems(),this.formCabecera.reset(),this.formSalida.reset(),this.cargandoTablaSalida=!0,this.productosBaja=[],this.dtElement.dtInstance.then(e=>{e.destroy(),this.dtTrigger.next(0)}),this.cargandoTablaSalida=!1}limpiarDetalle(){this.formSalida.reset()}onInputClick(e){"Enter"===e.key&&(console.log("Se presion\xf3 Enter"),this.obtenerProducto())}obtenerProducto(){let e=this.formSalida.get("idProducto")?.value;e?this.servicioC.obtenerProductoPorId(e).subscribe({next:i=>{this.formSalida.get("nombre")?.setValue(i.nombre),this.idProductoSeleccionado=e},error:i=>{i.forEach(r=>{this.mensajeAlertify.mensajeError(r)}),this.cargandoOperacion=!1}}):this.mensajeAlertify.mensajeError("Establezca el id de Producto - "+e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.v),t.Y36(n.qu),t.Y36(y),t.Y36(t.sBO),t.Y36(v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-salida-productos"]],viewQuery:function(e,i){if(1&e&&t.Gf(_.G,5),2&e){let r;t.iGM(r=t.CRH())&&(i.dtElement=r.first)}},decls:22,vars:5,consts:[[1,"container","mt-2"],[1,"text-center","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],["class","text-danger mt-3 fw-bold",4,"ngIf"],["class","row",4,"ngIf"],["id","smodal","tabindex","-1","aria-labelledby","modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table-responsive"],["class","table","datatable","",3,"dtOptions",4,"ngIf"],[1,"modal-footer"],[1,"btn","e-tercer-boton"],[1,"btn","e-primer-boton"],[1,"text-secondary","mt-3"],[1,"text-danger","mt-3","fw-bold"],[1,"row"],[1,"col-12","d-flex","justify-content-end","my-3"],[1,"btn","btn-warning","me-2",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"col-12"],[1,"text-secondary"],[1,"mt-3",3,"formGroup"],[1,"row","g-3"],[1,"col-md-12"],["for","observacion",1,"form-label"],["formControlName","observacion","type","text","id","observacion",1,"form-control"],["class","e-mensaje-error",4,"ngIf"],[1,"col-md-9"],[3,"formGroup"],[1,"col-md-3"],["for","idProducto",1,"form-label"],["formControlName","idProducto","type","number","id","idProducto",1,"form-control",3,"keydown"],[1,"col-md-6"],["for","salida",1,"form-label"],["formControlName","salida","id","salida",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-3","col-xl-3"],["for","cantidad",1,"form-label"],["formControlName","cantidad","type","number","id","cantidad",1,"form-control"],["for","nombre",1,"form-label"],["formControlName","nombre","type","text","id","nombre",1,"form-control"],[1,"col-md-3","col-xl-2"],[1,"d-grid","gap-2","d-flex","justify-content-end"],[1,"text-center"],["for","cantidad",1,"form-label","fw-bold","d-block"],[1,"btn","btn-secondary",3,"click"],[1,"bi","bi-search"],[1,"bi","bi-plus-square"],[1,"col-12","offset-md-9","col-md-3"],[1,"d-grid","gap-2"],[1,"btn","e-tercer-boton","fw-bold","my-4",3,"click"],["class","text-center",4,"ngIf"],["class","col-12",4,"ngIf"],["datatable","",1,"table","hover",3,"dtOptions","dtTrigger"],[4,"ngIf"],[1,"e-mensaje-error"],[3,"ngValue"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["role","status",1,"spinner-border","text-danger",2,"width","3rem","height","3rem"],[4,"ngFor","ngForOf"],[1,"bi","bi-trash3"],[1,"btn","btn-warning",3,"click"],[1,"bi","bi-arrow-up-right-square"],["datatable","",1,"table",3,"dtOptions"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Salida de productos"),t.qZA(),t.YNc(3,qt,3,3,"h6",2),t.YNc(4,Ut,2,1,"h6",2),t.YNc(5,yt,2,1,"p",3),t.YNc(6,Dt,65,15,"div",4),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"h1",9),t._uU(12,"Productos"),t.qZA(),t._UZ(13,"button",10),t.qZA(),t.TgZ(14,"div",11)(15,"div",12),t.YNc(16,Qt,15,2,"table",13),t.qZA()(),t.TgZ(17,"div",14)(18,"button",15),t._uU(19,"guardar"),t.qZA(),t.TgZ(20,"button",16),t._uU(21,"Eliminar"),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.idCabeceraInv),t.xp6(1),t.Q6J("ngIf",!i.invHabilitado),t.xp6(1),t.Q6J("ngIf",i.invHabilitado),t.xp6(10),t.Q6J("ngIf",i.productos.length>0))},dependencies:[d.sg,d.O5,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,n.sg,n.u,_.G,d.JJ,d.rS,d.uU]}),o})();function kt(o,a){if(1&o&&(t.TgZ(0,"h6",8),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.fechaApertura),"")}}function Mt(o,a){if(1&o&&(t.TgZ(0,"h6",8),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.idCabeceraInv,"")}}function Ft(o,a){1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"span",11),t._uU(3,"Loading..."),t.qZA()()())}function zt(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td",16),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t.qZA(),t.TgZ(5,"td",9),t._uU(6),t.qZA(),t.TgZ(7,"td",9),t._uU(8),t.qZA(),t.TgZ(9,"td",9),t._uU(10),t.qZA(),t.TgZ(11,"td",9),t._uU(12),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"td",9),t._uU(15),t.qZA(),t.TgZ(16,"td",9),t._uU(17),t.qZA(),t.TgZ(18,"td",17),t._uU(19),t.qZA(),t.TgZ(20,"td",9)(21,"button",18),t._UZ(22,"i",19),t.qZA()(),t.TgZ(23,"td",9)(24,"button",20),t._UZ(25,"i",21),t.qZA()()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.idproducto),t.xp6(2),t.Oqu(e.Producto.nombre),t.xp6(2),t.Oqu(e.cantidadApertura),t.xp6(2),t.Oqu(e.cantidadCierre),t.xp6(2),t.Oqu(e.cantidadApertura-e.cantidadCierre),t.xp6(2),t.Oqu(t.lcZ(13,9,(e.cantidadApertura-e.cantidadCierre)*e.precio)),t.xp6(3),t.Oqu(e.cantidadRecepcion),t.xp6(2),t.Oqu(e.cantidadSalida),t.xp6(2),t.Oqu(e.precio)}}function Vt(o,a){if(1&o&&(t.TgZ(0,"table",13)(1,"thead",14)(2,"tr")(3,"th",9),t._uU(4,"Id"),t.qZA(),t.TgZ(5,"th",9),t._uU(6,"Producto"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Apertura"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Cierre"),t.qZA(),t.TgZ(11,"th",9),t._uU(12,"Diferencia"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"Total"),t.qZA(),t.TgZ(15,"th",9),t._uU(16,"Recepcion"),t.qZA(),t.TgZ(17,"th",9),t._uU(18,"Salida"),t.qZA(),t.TgZ(19,"th",9),t._uU(20,"Precio"),t.qZA(),t.TgZ(21,"th",9),t._uU(22,"Recepcion"),t.qZA(),t.TgZ(23,"th",9),t._uU(24,"Salida"),t.qZA()()(),t.TgZ(25,"tbody"),t.YNc(26,zt,26,11,"tr",15),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(26),t.Q6J("ngForOf",e.dinventario)}}function Ht(o,a){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,Vt,27,1,"table",12),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dinventario.length>0)}}const $t=function(o,a){return{"text-danger":o,"text-secondary":a}};function Bt(o,a){if(1&o&&(t.TgZ(0,"h6",8),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.fechaApertura),"")}}function Kt(o,a){if(1&o&&(t.TgZ(0,"h6",8),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.idCabeceraInv,"")}}function Xt(o,a){1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"span",11),t._uU(3,"Loading..."),t.qZA()()())}function Wt(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td",16),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"td",16),t._uU(7),t.qZA(),t.TgZ(8,"td",17),t._uU(9),t.ALo(10,"number"),t.qZA(),t.TgZ(11,"td",9),t._uU(12),t.qZA(),t.TgZ(13,"td",17),t._uU(14),t.ALo(15,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.idcrecepcion),t.xp6(2),t.Oqu(t.xi3(5,6,e.Crecepcion.fecha,"dd-MM-yyyy HH:mm:ss")),t.xp6(3),t.Oqu(e.Producto.nombre),t.xp6(2),t.Oqu(t.lcZ(10,9,e.precio)),t.xp6(3),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(t.lcZ(15,11,e.total))}}function te(o,a){if(1&o&&(t.TgZ(0,"table",13)(1,"thead",14)(2,"tr")(3,"th",9),t._uU(4,"Id Recepcion"),t.qZA(),t.TgZ(5,"th",9),t._uU(6,"Fecha"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Producto"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Precio"),t.qZA(),t.TgZ(11,"th",9),t._uU(12,"Cantidad"),t.qZA(),t.TgZ(13,"th",9),t._uU(14,"Total"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Wt,16,13,"tr",15),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(16),t.Q6J("ngForOf",e.drecpciones)}}function ee(o,a){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,te,17,1,"table",12),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.drecpciones.length>0)}}const oe=function(o,a){return{"text-danger":o,"text-secondary":a}};function re(o,a){if(1&o&&(t.TgZ(0,"h6",8),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Fecha Apertura: ",t.lcZ(2,1,e.fechaApertura),"")}}function ae(o,a){if(1&o&&(t.TgZ(0,"h6",8),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij("Nro Inventario: ",e.idCabeceraInv,"")}}function ne(o,a){1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"span",11),t._uU(3,"Loading..."),t.qZA()()())}function se(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td",16),t._uU(2),t.qZA(),t.TgZ(3,"td",16),t._uU(4),t.qZA(),t.TgZ(5,"td",17),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"td",9),t._uU(9),t.qZA(),t.TgZ(10,"td",17),t._uU(11),t.ALo(12,"number"),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.idcsalida),t.xp6(2),t.Oqu(e.Producto.nombre),t.xp6(2),t.Oqu(t.lcZ(7,5,e.Producto.DInventarios[0].precio)),t.xp6(3),t.Oqu(e.cantidad),t.xp6(2),t.Oqu(t.lcZ(12,7,e.total))}}function ce(o,a){if(1&o&&(t.TgZ(0,"table",13)(1,"thead",14)(2,"tr")(3,"th",9),t._uU(4,"Id Salida"),t.qZA(),t.TgZ(5,"th",9),t._uU(6,"Producto"),t.qZA(),t.TgZ(7,"th",9),t._uU(8,"Precio"),t.qZA(),t.TgZ(9,"th",9),t._uU(10,"Cantidad"),t.qZA(),t.TgZ(11,"th",9),t._uU(12,"Total"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,se,13,9,"tr",15),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(14),t.Q6J("ngForOf",e.dsalidas)}}function de(o,a){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,ce,15,1,"table",12),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dsalidas.length>0)}}const le=function(o,a){return{"text-danger":o,"text-secondary":a}},ue=[{path:"",component:S,children:[{path:"visualizarInventarios",component:(()=>{class o{constructor(e,i){this.servicioI=e,this.mensajeAlertify=i,this.dinventario=[],this.cargandoDatos=!0,this.invHabilitado=!1,this.descripcion=""}ngOnInit(){this.cargandoDatos=!0,this.servicioI.obtenerDatosVisualizar().subscribe({next:e=>{console.log(e),this.descripcion=e.descripcion,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,e.mostrar&&(this.invHabilitado=!0,this.dinventario=e.dinventario),this.cargandoDatos=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoDatos=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(v),t.Y36(m.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-visualizar-inventarios"]],decls:12,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center","mt-3","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],[1,"mt-3","fw-bold",3,"ngClass"],["class","text-center",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-secondary","mt-3"],[1,"text-center"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["class","table hover mt-2",4,"ngIf"],[1,"table","hover","mt-2"],[1,"bg-warning"],[4,"ngFor","ngForOf"],[1,"text-start"],[1,"text-end","fw-bold"],[1,"btn","btn-warning"],[1,"bi","bi-box-arrow-in-left"],[1,"btn","btn-secondary"],[1,"bi","bi-box-arrow-right"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.qZA(),t.YNc(5,kt,3,3,"h6",4),t.YNc(6,Mt,2,1,"h6",4),t.TgZ(7,"h6",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",2),t.YNc(10,Ft,4,0,"div",6),t.qZA(),t.YNc(11,Ht,2,1,"div",7),t.qZA()()),2&e&&(t.xp6(4),t.Oqu("Detalle de inventario"),t.xp6(1),t.Q6J("ngIf",i.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.idCabeceraInv),t.xp6(1),t.Q6J("ngClass",t.WLB(7,$t,!i.invHabilitado,i.invHabilitado)),t.xp6(1),t.Oqu(i.descripcion),t.xp6(2),t.Q6J("ngIf",i.cargandoDatos),t.xp6(1),t.Q6J("ngIf",!i.cargandoDatos))},dependencies:[d.mk,d.sg,d.O5,d.JJ,d.uU]}),o})()},{path:"visualizarRecepciones",component:(()=>{class o{constructor(e,i){this.servicioR=e,this.mensajeAlertify=i,this.drecpciones=[],this.cargandoDatos=!0,this.invHabilitado=!1,this.descripcion=""}ngOnInit(){this.cargandoDatos=!0,this.servicioR.obtenerDatosVisualizar().subscribe({next:e=>{console.log(e),this.descripcion=e.descripcion,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,e.mostrar&&(this.invHabilitado=!0,this.drecpciones=e.drecepcion),this.cargandoDatos=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoDatos=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U),t.Y36(m.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-visualizar-recepciones"]],decls:12,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center","mt-3","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],[1,"mt-3","fw-bold",3,"ngClass"],["class","text-center",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-secondary","mt-3"],[1,"text-center"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["class","table hover mt-2",4,"ngIf"],[1,"table","hover","mt-2"],[1,"bg-warning"],[4,"ngFor","ngForOf"],[1,"text-start"],[1,"text-end"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.qZA(),t.YNc(5,Bt,3,3,"h6",4),t.YNc(6,Kt,2,1,"h6",4),t.TgZ(7,"h6",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",2),t.YNc(10,Xt,4,0,"div",6),t.qZA(),t.YNc(11,ee,2,1,"div",7),t.qZA()()),2&e&&(t.xp6(4),t.Oqu("Detalle de recepciones"),t.xp6(1),t.Q6J("ngIf",i.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.idCabeceraInv),t.xp6(1),t.Q6J("ngClass",t.WLB(7,oe,!i.invHabilitado,i.invHabilitado)),t.xp6(1),t.Oqu(i.descripcion),t.xp6(2),t.Q6J("ngIf",i.cargandoDatos),t.xp6(1),t.Q6J("ngIf",!i.cargandoDatos))},dependencies:[d.mk,d.sg,d.O5,d.JJ,d.uU]}),o})()},{path:"visualizarSalidas",component:(()=>{class o{constructor(e,i){this.servicioS=e,this.mensajeAlertify=i,this.dsalidas=[],this.cargandoDatos=!0,this.invHabilitado=!1,this.descripcion=""}ngOnInit(){this.cargandoDatos=!0,this.servicioS.obtenerDatosVisualizar().subscribe({next:e=>{this.descripcion=e.descripcion,this.fechaApertura=e.fechaApertura,this.idCabeceraInv=e.idCabeceraInv,e.mostrar&&(this.invHabilitado=!0,this.dsalidas=e.dsalida),this.cargandoDatos=!1},error:e=>{e.forEach(i=>{this.mensajeAlertify.mensajeError(i)}),this.cargandoDatos=!1}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y),t.Y36(m.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-visualizar-salidas"]],decls:12,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"text-center","mt-3","text-dark-emphasis"],["class","text-secondary mt-3",4,"ngIf"],[1,"mt-3","fw-bold",3,"ngClass"],["class","text-center",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-secondary","mt-3"],[1,"text-center"],["role","status",1,"spinner-border","text-danger"],[1,"visually-hidden"],["class","table hover mt-2",4,"ngIf"],[1,"table","hover","mt-2"],[1,"bg-warning"],[4,"ngFor","ngForOf"],[1,"text-start"],[1,"text-end"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t._uU(4),t.qZA(),t.YNc(5,re,3,3,"h6",4),t.YNc(6,ae,2,1,"h6",4),t.TgZ(7,"h6",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",2),t.YNc(10,ne,4,0,"div",6),t.qZA(),t.YNc(11,de,2,1,"div",7),t.qZA()()),2&e&&(t.xp6(4),t.Oqu("Detalle de salidas"),t.xp6(1),t.Q6J("ngIf",i.fechaApertura),t.xp6(1),t.Q6J("ngIf",i.idCabeceraInv),t.xp6(1),t.Q6J("ngClass",t.WLB(7,le,!i.invHabilitado,i.invHabilitado)),t.xp6(1),t.Oqu(i.descripcion),t.xp6(2),t.Q6J("ngIf",i.cargandoDatos),t.xp6(1),t.Q6J("ngIf",!i.cargandoDatos))},dependencies:[d.mk,d.sg,d.O5,d.JJ,d.uU]}),o})()},{path:"salidaProductos",component:Lt},{path:"recepcion",component:Ct},{path:"rendicion",component:k},{path:"inventario",component:tt},{path:"aperturaInventario",component:st},{path:"**",redirectTo:"usuario"}]}];let pe=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[b.Bz.forChild(ue),b.Bz]}),o})();var me=u(9531);let he=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,pe,n.UX,_.T,me.H]}),o})()}}]);