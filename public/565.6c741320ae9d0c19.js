"use strict";(self.webpackChunkysapy_web=self.webpackChunkysapy_web||[]).push([[565],{1565:(q,c,r)=>{r.r(c),r.d(c,{AutentificacionModule:()=>b});var u=r(6895),s=r(2367),a=r(4006),o=r(8256),d=r(2550),m=r(6386);function f(t,i){if(1&t&&(o.TgZ(0,"small",29),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Oqu(e.mensajeError("correo"))}}function p(t,i){if(1&t&&(o.TgZ(0,"small",29),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.Oqu(e.mensajeError("contra"))}}let g=(()=>{class t{constructor(e,n,l,x){this.formBuilder=e,this.router=n,this.authService=l,this.mensajeAlertify=x,this.mensaje=""}ngOnInit(){this.form=this.formBuilder.group({correo:["",[a.kI.required]],contra:["",[a.kI.required]]})}login(){console.log("Login"),console.log("correo ",this.form.get("correo")?.value),this.form.valid?this.authService.ingresarRetornarPerfil(this.form.get("correo")?.value,this.form.get("contra")?.value).subscribe({next:e=>{this.mensaje="ROOT"==this.authService.usuario.Rol.rol?"Root":"ADMINISTRACION"==this.authService.usuario.Rol.rol?"Administrador":"FUNCIONARIO"==this.authService.usuario.Rol.rol?"Funcionario":"CLIENTE"==this.authService.usuario.Rol.rol?"Cliente":"Rol no definido",this.mensajeAlertify.mensajeExito(`Has ingresado como ${this.mensaje}`),console.log("funciona next"),this.router.navigate(["/autentificacion/perfil"])},error:e=>{console.log("errores ",e),e.forEach(n=>{this.mensajeAlertify.mensajeError(n)})}}):this.form.markAllAsTouched()}isInvalid(e){let n=(this.form.get(e)?.touched||this.form.get(e)?.dirty)&&this.form.get(e)?.invalid,l=document.getElementById(e);return n?l?.classList.add("is-invalid"):l?.classList.remove("is-invalid"),n}mensajeError(e){let n="";return this.form.get(e)?.hasError("required")&&("correo"==e?n="El correo es requerido !!":"contra"==e&&(n="La contrase\xf1a es requerida !!")),n}invalidarCampos(){document.getElementById("correo").className+=" is-invalid",document.getElementById("contra").className+=" is-invalid"}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.qu),o.Y36(s.F0),o.Y36(d.Q),o.Y36(m.v))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:43,vars:3,consts:[["id","fondo"],[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],["id","tarjeta",1,"bg-white","px-4","pb-5","rounded-5","text-secondary","shadow"],[1,"d-flex","justify-content-center"],["id","iconoLogin",1,"bi","bi-person-fill-lock"],[1,"text-center","fs-1","fw-bold","text-dark-emphasis"],[3,"formGroup"],[1,"input-group","has-validation"],[1,"input-group-text","e-iconoLabel"],[1,"bi","bi-person-fill"],[1,"form-floating","is-invalid"],["type","text","id","correo","placeholder"," ","formControlName","correo",1,"form-control"],["for","correo"],[1,"invalid-feedback"],["class","e-mensaje-error",4,"ngIf"],[1,"input-group","has-validation","mt-1"],[1,"bi","bi-key-fill"],["type","text","id","contra","placeholder"," ","formControlName","contra",1,"form-control"],["for","contra"],["id","alerta",1,"mt-2"],["type","button",1,"btn","text-white","w-100","mt-2","fw-semibold","shadow-sm","btn-secondary",3,"click"],[1,"d-flex","gap-1","justify-content-center","mt-1"],["routerLink","/",1,"text-decoration-none","fw-semibold","text-dark-emphasis"],[1,"p-3"],[1,"border-bottom","text-center",2,"height","0.9rem"],[1,"bg-white","px-3"],[1,"btn","d-flex","gap-2","justify-content-center","border","mt-3","shadow-sm"],["id","iconoGoogle",1,"bi","bi-google","text-secondary"],[1,"fw-semibold","text-secondary"],[1,"e-mensaje-error"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o._UZ(4,"i",4),o.qZA(),o.TgZ(5,"h1",5),o._uU(6,"Login"),o.qZA(),o._UZ(7,"br"),o.TgZ(8,"form",6)(9,"div",7)(10,"span",8),o._UZ(11,"i",9),o.qZA(),o.TgZ(12,"div",10),o._UZ(13,"input",11),o.TgZ(14,"label",12),o._uU(15,"Correo"),o.qZA()(),o._UZ(16,"div",13),o.qZA(),o.YNc(17,f,2,1,"small",14),o.TgZ(18,"div",15)(19,"span",8),o._UZ(20,"i",16),o.qZA(),o.TgZ(21,"div",10),o._UZ(22,"input",17),o.TgZ(23,"label",18),o._uU(24,"Contrase\xf1a"),o.qZA()(),o._UZ(25,"div",13),o.qZA(),o.YNc(26,p,2,1,"small",14),o._UZ(27,"div",19),o.TgZ(28,"button",20),o.NdJ("click",function(){return n.login()}),o._uU(29,"Ingresar"),o.qZA(),o.TgZ(30,"div",21)(31,"div"),o._uU(32,"No tienes una cuenta ?"),o.qZA(),o.TgZ(33,"a",22),o._uU(34,"Registrarse"),o.qZA()(),o.TgZ(35,"div",23)(36,"div",24)(37,"span",25),o._uU(38,"\xf3"),o.qZA()()(),o.TgZ(39,"div",26),o._UZ(40,"i",27),o.TgZ(41,"div",28),o._uU(42,"Contin\xfaa con Google"),o.qZA()()()()()()),2&e&&(o.xp6(8),o.Q6J("formGroup",n.form),o.xp6(9),o.Q6J("ngIf",n.isInvalid("correo")),o.xp6(9),o.Q6J("ngIf",n.isInvalid("contra")))},dependencies:[u.O5,s.rH,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:["#tarjeta[_ngcontent-%COMP%]{width:25rem}#iconoLogin[_ngcontent-%COMP%]{font-size:7rem;color:var(--segundo-color)}.e-texto-marron[_ngcontent-%COMP%]{color:var(--tercer-color)}.e-iconoLabel[_ngcontent-%COMP%]{background-color:var(--segundo-color);color:#fff;border-color:var(--segundo-color)}#btnIngresar[_ngcontent-%COMP%]{background-color:var(--tercer-color)}#iconoGoogle[_ngcontent-%COMP%]{height:1.6rem}"]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-main"]],decls:1,vars:0,template:function(e,n){1&e&&o._UZ(0,"router-outlet")},dependencies:[s.lC]}),t})();var v=r(9019),Z=r(1334);const T=[{path:"",component:h,children:[{path:"login",component:g},{path:"perfil",component:(()=>{class t{constructor(e){this.servicioA=e,this.apiUrl=`${v.N.API_URL}/api/uploads/usuarios/`}ngOnInit(){this.usuario=this.servicioA.usuario}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(d.Q))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-perfil"]],decls:32,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],[1,"card","my-3","w-100"],[1,"row","g-2"],[1,"col-md-6","text-center"],["alt","...",1,"img-fluid","rounded-start","w-100",3,"src"],[1,"col-md-6"],[1,"card-body"]],template:function(e,n){1&e&&(o._UZ(0,"app-menu-funcionario"),o.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),o._UZ(7,"img",6),o.qZA(),o.TgZ(8,"div",7)(9,"div",8)(10,"h2"),o._uU(11,"Perfil de usuario"),o.qZA(),o.TgZ(12,"h3"),o._uU(13,"Nombre: "),o.qZA(),o.TgZ(14,"p"),o._uU(15),o.qZA(),o.TgZ(16,"h3"),o._uU(17,"Usuario: "),o.qZA(),o.TgZ(18,"p"),o._uU(19),o.qZA(),o.TgZ(20,"h3"),o._uU(21,"Correo: "),o.qZA(),o.TgZ(22,"p"),o._uU(23),o.qZA(),o.TgZ(24,"h3"),o._uU(25,"Rol: "),o.qZA(),o.TgZ(26,"p"),o._uU(27),o.qZA(),o.TgZ(28,"h3"),o._uU(29,"Sucursal: "),o.qZA(),o.TgZ(30,"p"),o._uU(31),o.qZA()()()()()()()()),2&e&&(o.xp6(7),o.Q6J("src",n.apiUrl+n.usuario.idUsuario,o.LSH),o.xp6(8),o.Oqu(n.usuario.nombre),o.xp6(4),o.Oqu(n.usuario.nusuario),o.xp6(4),o.Oqu(n.usuario.correo),o.xp6(4),o.Oqu(n.usuario.Rol.rol),o.xp6(4),o.Oqu(n.usuario.Sucursal.nombre))},dependencies:[Z.e]}),t})(),canActivate:[r(6866).z]},{path:"**",redirectTo:"login"}]}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[s.Bz.forChild(T),s.Bz]}),t})();var C=r(9531);let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[u.ez,y,a.UX,C.H]}),t})()}}]);